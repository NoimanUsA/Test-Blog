"use strict";(self["webpackChunkspa_blog"]=self["webpackChunkspa_blog"]||[]).push([[15],{1348:(e,t,o)=>{o.d(t,{gk:()=>r,li:()=>l,F6:()=>s});o(2100);const l=()=>{const e=window.localStorage.getItem("comments");return e?JSON.parse(e):{}},n=e=>{window.localStorage.removeItem("comments"),window.localStorage.setItem("comments",JSON.stringify(e))},s=e=>{const t=l();return t[e]||[]},r=(e,t)=>{const o=l();o[e]=t,n(o)}},9288:(e,t,o)=>{o.d(t,{AL:()=>a,Kk:()=>n,lj:()=>d,qC:()=>s,Qk:()=>m});o(2100);var l=o(580);const n=()=>{const e=window.localStorage.getItem("notes");return!!e&&JSON.parse(e)},s=e=>{const t=n();return t[e]},r=e=>{window.localStorage.removeItem("notes"),window.localStorage.setItem("notes",JSON.stringify(e))},a=e=>{const t=l.V.v1(),o=n()||{};o[t]={...e,id:t},r(o)},m=(e,t)=>{const o=n();o[e]=t,r(o)},d=e=>{const t=n()||{};delete t[e],r(t)}},1015:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Q});var l=o(3673),n=o(2323),s=o(8880);const r={class:"note"},a={rounded:"",class:"note q-pa-md column shadow-2 text-grey-1 rounded-borders"},m={class:"text-h4"},d={class:"q-mt-lg"},u={class:"row q-mt-xl q-gutter-xs"},c=(0,l.Uk)("Редактировать"),i=(0,l.Uk)("Удалить"),w={rounded:"",class:"note q-pa-md q-mt-md column shadow-2 text-grey-1 rounded-borders"},v=(0,l._)("h2",{class:"text-h4"},"Комментарии",-1),g={key:0,class:"text-h4 q-mt-xl"},p={class:"note__comments column q-gutter-md q-mt-md"},b={class:"text-h5"},h={class:"q-mt-md"},_={class:"row q-mt-md"},k=(0,l.Uk)("Удалить"),q=(0,l.Uk)(" Ваше имя "),C=(0,l.Uk)(" Текст комментария "),f={class:"row"},x=(0,l.Uk)("Сохранить");function y(e,t,o,y,S,N){const I=(0,l.up)("q-btn"),U=(0,l.up)("q-input"),V=(0,l.up)("q-form");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",a,[(0,l._)("h2",m,(0,n.zw)(y.note.title),1),(0,l._)("div",d,(0,n.zw)(y.note.text),1),(0,l._)("div",u,[(0,l.Wm)(I,{to:{name:"rewrite-note",params:{id:y.note.id}},glossy:""},{default:(0,l.w5)((()=>[c])),_:1},8,["to"]),(0,l.Wm)(I,{onClick:y.removeCurrentNote,color:"red-8",glossy:""},{default:(0,l.w5)((()=>[i])),_:1},8,["onClick"])])]),(0,l._)("div",w,[v,0===y.comments.length?((0,l.wg)(),(0,l.iD)("div",g,"Здесь пока нет комментариев")):(0,l.kq)("",!0),(0,l._)("div",p,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.comments,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"note__comment q-pa-md column shadow-2 text-grey-1 rounded-borders",key:e.id},[(0,l._)("div",b,(0,n.zw)(e.author),1),(0,l._)("div",h,(0,n.zw)(e.text),1),(0,l._)("div",_,[(0,l.Wm)(I,{onClick:t=>y.removeComment(e.id),color:"red-8",glossy:""},{default:(0,l.w5)((()=>[k])),_:2},1032,["onClick"])])])))),128))]),(0,l.Wm)(V,{class:"q-mt-md column q-gutter-md",onSubmit:(0,s.iM)(y.addNewComment,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{modelValue:y.newCommentAuthor,"onUpdate:modelValue":t[0]||(t[0]=e=>y.newCommentAuthor=e),dense:"",name:"title",color:"light-blue-10","bg-color":"grey-1",label:"",outlined:"",class:"col-6",clearable:""},{label:(0,l.w5)((()=>[q])),_:1},8,["modelValue"]),(0,l.Wm)(U,{modelValue:y.newCommentText,"onUpdate:modelValue":t[1]||(t[1]=e=>y.newCommentText=e),dense:"",name:"header",color:"light-blue-10",class:"row col-7",error:"false","bg-color":"grey-1",label:"",outlined:"",type:"textarea",clearable:""},{label:(0,l.w5)((()=>[C])),_:1},8,["modelValue"]),(0,l._)("div",f,[(0,l.Wm)(I,{disabled:!y.errors,type:"submit",color:"light-blue-8",glossy:""},{default:(0,l.w5)((()=>[x])),_:1},8,["disabled"])])])),_:1},8,["onSubmit"])])])}var S=o(9288),N=o(1348),I=o(9582),U=o(1959),V=o(580);const W={name:"Note",setup(){const e=(0,I.tv)(),t=(0,I.yj)().params.id,o=(0,U.iH)({}),n=(0,U.iH)([]),s=(0,U.iH)(null),r=(0,U.iH)(null),a=(0,U.Fl)((()=>r.value&&s.value));function m(){const e=V.V.v1();n.value.push({author:s.value,text:r.value,id:e}),(0,N.gk)(t,n.value)}function d(e){const o=n.value.filter((t=>t.id!==e));n.value=o,(0,N.gk)(t,n.value)}function u(){(0,S.lj)(t),e.push("/")}return(0,l.bv)((()=>{o.value=(0,S.qC)(t),o.value||e.push("/"),n.value=(0,N.F6)(t)})),{note:o,noteId:t,comments:n,newCommentAuthor:s,newCommentText:r,addNewComment:m,removeComment:d,removeCurrentNote:u,errors:a}}};var H=o(4260),z=o(4607),A=o(8689),D=o(7967),F=o(7518),J=o.n(F);const O=(0,H.Z)(W,[["render",y]]),Q=O;J()(W,"components",{QBtn:z.Z,QForm:A.Z,QInput:D.Z})}}]);