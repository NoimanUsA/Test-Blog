"use strict";(self["webpackChunkspa_blog"]=self["webpackChunkspa_blog"]||[]).push([[405],{9405:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});var l=o(3673),n=o(2323),m=o(8880);const s={class:"note"},a={rounded:"",class:"note q-pa-md column shadow-2 text-grey-1 rounded-borders"},d={class:"text-h4"},r={class:"q-mt-lg"},u={class:"row q-mt-xl q-gutter-xs"},c=(0,l.Uk)("Редактировать"),i=(0,l.Uk)("Удалить"),w={rounded:"",class:"note q-pa-md q-mt-md column shadow-2 text-grey-1 rounded-borders"},v=(0,l._)("h2",{class:"text-h4"},"Комментарии",-1),_={key:0,class:"text-h4 q-mt-xl"},b={class:"note__comments column q-gutter-md q-mt-md"},g={class:"text-h5"},h={class:"q-mt-md"},p={class:"row q-mt-md"},C=(0,l.Uk)("Удалить"),q=(0,l.Uk)(" Ваше имя "),k=(0,l.Uk)(" Текст комментария "),x={class:"row"},f=(0,l.Uk)("Сохранить");function y(e,t,o,y,E,N){const T=(0,l.up)("q-btn"),U=(0,l.up)("q-input"),V=(0,l.up)("q-form");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",a,[(0,l._)("h2",d,(0,n.zw)(y.note.title),1),(0,l._)("div",r,(0,n.zw)(y.note.text),1),(0,l._)("div",u,[(0,l.Wm)(T,{to:{name:"rewrite-note",params:{id:y.note.id}},glossy:""},{default:(0,l.w5)((()=>[c])),_:1},8,["to"]),(0,l.Wm)(T,{onClick:y.removeNote,color:"red-8",glossy:""},{default:(0,l.w5)((()=>[i])),_:1},8,["onClick"])])]),(0,l._)("div",w,[v,0===y.comments.length?((0,l.wg)(),(0,l.iD)("div",_,"Здесь пока нет комментариев")):(0,l.kq)("",!0),(0,l._)("div",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.comments,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"note__comment q-pa-md column shadow-2 text-grey-1 rounded-borders",key:e.id},[(0,l._)("div",g,(0,n.zw)(e.author),1),(0,l._)("div",h,(0,n.zw)(e.text),1),(0,l._)("div",p,[(0,l.Wm)(T,{onClick:t=>y.removeComment(e.id),color:"red-8",glossy:""},{default:(0,l.w5)((()=>[C])),_:2},1032,["onClick"])])])))),128))]),(0,l.Wm)(V,{class:"q-mt-md column q-gutter-md",onSubmit:(0,m.iM)(y.addNewComment,["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{modelValue:y.newCommentAuthor,"onUpdate:modelValue":t[0]||(t[0]=e=>y.newCommentAuthor=e),dense:"",name:"title",color:"light-blue-10","bg-color":"grey-1",label:"",outlined:"",class:"col-6",clearable:""},{label:(0,l.w5)((()=>[q])),_:1},8,["modelValue"]),(0,l.Wm)(U,{modelValue:y.newCommentText,"onUpdate:modelValue":t[1]||(t[1]=e=>y.newCommentText=e),dense:"",name:"header",color:"light-blue-10",class:"row col-7",error:"false","bg-color":"grey-1",label:"",outlined:"",type:"textarea",clearable:""},{label:(0,l.w5)((()=>[k])),_:1},8,["modelValue"]),(0,l._)("div",x,[(0,l.Wm)(T,{disabled:!y.errors,type:"submit",color:"light-blue-8",glossy:""},{default:(0,l.w5)((()=>[f])),_:1},8,["disabled"])])])),_:1},8,["onSubmit"])])])}var E=o(9728),N=o(3617),T=o(1959);const U={name:"Note",setup(){const{dispatch:e,state:t}=(0,N.oR)(),o=(0,E.tv)(),n=(0,E.yj)().params.id,m=(0,T.Fl)((()=>t.notes?t.notes[n]:{})),s=(0,T.Fl)((()=>t.notes?t.notes[n].comments:[])),a=(0,T.iH)(null),d=(0,T.iH)(null),r=(0,T.Fl)((()=>d.value&&a.value));function u(){const t={author:a.value,text:d.value};e("CREATE_COMMENT",{noteId:n,newComment:t}),a.value=null,d.value=null}function c(t){e("REMOVE_COMMENT",{noteId:n,commentId:t})}function i(){e("REMOVE_NOTE",n),o.push("/notes")}return(0,l.bv)((()=>{e("FETCH_NOTES"),m.value||o.push("/")})),{note:m,noteId:n,comments:s,newCommentAuthor:a,newCommentText:d,addNewComment:u,removeComment:c,removeNote:i,errors:r}}};var V=o(4260),M=o(4607),W=o(8689),O=o(7967),F=o(7518),I=o.n(F);const z=(0,V.Z)(U,[["render",y]]),A=z;I()(U,"components",{QBtn:M.Z,QForm:W.Z,QInput:O.Z})}}]);